<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@latest/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>

    <div class="text-center" *ngIf="admin === 'true'">
        <h3>{{ name }}, You are an admin!</h3>
    </div>

    <div class="row">
        <div class="container text-center my-4">
            <h2 class="display-4 font-weight-bold">Discover Our Collection</h2>
            <p class="lead">Explore the available items for borrowing.</p>
          </div>
          

          <div class="upload-btn ml-auto">
            <button type="button" class="btn btn-custom btn-white-bg rounded-pill mx-2" (click)="goToUpload()">
                <i class="bi bi-upload"></i> Upload Item
            </button>
        </div>
        
        <div class="container text-center mb-4">
            <button type="button" class="btn btn-custom btn-white-bg rounded-pill mx-2" value="Home" (click)="filter($event)">
                <i class="bi bi-house-door"></i> Home
            </button>
            <button type="button" class="btn btn-custom btn-white-bg rounded-pill mx-2" value="Office" (click)="filter($event)">
                <i class="bi bi-building"></i> Office
            </button>
            <button type="button" class="btn btn-custom btn-white-bg rounded-pill mx-2" value="Work Tools" (click)="filter($event)">
                <i class="bi bi-tools"></i> Work Tool
            </button>
            <button type="button" class="btn btn-custom btn-white-bg rounded-pill mx-2" value="Else" (click)="filter($event)">
                <i class="bi bi-gear"></i> General
            </button>
            <button type="button" class="btn btn-custom btn-white-bg rounded-pill mx-2" value="All" (click)=fetchItems()>
                <i class="bi bi-globe"></i> All
            </button>
        </div>
               

        <div class="row">
            <div class="ari col-md-4 mb-3" *ngFor="let item of filterItems">   
                <div class="card">
                    <div class="card-body transparent-bg">

                        <div [style.color]="'red'" [style.font-size]="'1.5em'">
                            <span *ngIf="item.taken"> In use! </span>
                          </div>

                        <div class="item-title"><h4>Item name: {{ item.item_name }}</h4></div>
                        <p>Category: {{ item.item_category }}</p>
                        <p>City: {{ item.city }}</p>
                        <p>Description: {{ item.description }}</p>

                        <div *ngIf="showDetails && selectedItemId === item.id" class="mt-3">
                            <hr class="bg-light">
                            <p><strong>Item ID:</strong> {{ item.id }}</p>
                            <p><strong>Number:</strong> {{ item.phon_number}}</p>
                            <p><strong>Uploaded By:</strong> {{ item.uploaded_by}}</p>
                            <p><strong>Taken:</strong> {{ item.taken }}</p>
                            <p><strong>Uploaded Date:</strong> {{ item.uploaded_date }}</p>                            
                        </div>

                            <button
                              type="button"
                              class="btn btn-custom"
                              [ngClass]="{'btn-success': selectedItemId === item.id && !showDetails, 'btn-danger': selectedItemId === item.id && showDetails}"
                              (click)="handleDivClick(item)"
                            >
                              <i class="bi" [ngClass]="{'bi-box-arrow-in-down': selectedItemId === item.id && !showDetails, 'bi-box-arrow-in-up': selectedItemId === item.id && showDetails}"></i>
                              <span>{{ showDetails && selectedItemId === item.id ? 'Hide Details' : 'Show Details' }}</span>
                            </button>
                          </div>
                          
                    </div>
                </div>
            </div>
        </div>
    


    <hr class="my-5 bg-primary" style="height: 3px;">        
    <div class="row">
        <div class="container text-center my-4">
            <h2 class="display-4 font-weight-bold">Currently in Use</h2>
            <p class="lead">Discover the items that are actively being borrowed so you can catch them in time next time.</p>
        </div>
        <div class="row">
            <div class="ari col-md-4 mb-3" *ngFor="let takenItem of takenItems">   
                <div class="card">
                    <div class="card-body transparent-bg" [ngClass]="{'text-bold': takenItem === selectedChosenItem}" style="color: black;">

                        <div class="use text-center" [style.font-size]="'1.5em'">
                            <span *ngIf="takenItem.taken"> In use! </span>
                          </div>

                        <h4>Item name: {{ takenItem.item_name }}</h4>
                        <p>Category: {{ takenItem.item_category }}</p>
                        <p>City: {{ takenItem.city }}</p>
                        <p>Description: {{ takenItem.description }}</p>
                        <p><strong>Item ID:</strong> {{ takenItem.id }}</p>
                        <p><strong>Number:</strong> {{ takenItem.phon_number}}</p>
                        <p><strong>Uploaded By:</strong> {{ takenItem.uploaded_by}}</p>
                        <p><strong>Taken:</strong> {{ takenItem.taken }}</p>
                        <p><strong>Uploaded Date:</strong> {{ takenItem.uploaded_date }}</p>       
                                             
                        </div>                                
                    </div>
                </div>
            </div>
        </div>


        <hr class="my-5 bg-primary" style="height: 3px;">        
        <div class="about card-body text-center">
            <h2 class="display-4 font-weight-bold">Why LendLink?</h2>
            <div class="about-text row">
                <div class="col-md-4 mb-4">
                    <div class="feature text-center">
                        <i class="bi bi-geo-alt h1 text-primary"></i>
                        <p class="mt-2"><strong>Community-Driven</strong></p>
                        <p>Connect with neighbors, share resources, and strengthen community bonds.</p>
                    </div>
                </div>

                <div class="col-md-4 mb-4">
                    <div class="feature text-center">
                        <i class="bi bi-currency-dollar h1 text-success"></i>
                        <p class="mt-2"><strong>Save Money</strong></p>
                        <p>Borrow what you need instead of buying. A win-win for your wallet and the environment.</p>
                    </div>
                </div>

                <div class="col-md-4 mb-4">
                    <div class="feature text-center">
                        <i class="bi bi-recycle h1 text-info"></i>
                        <p class="mt-2"><strong>Reduce Waste</strong></p>
                        <p>Embrace sustainable living by giving items a second life through sharing.</p>
                    </div>
                </div>
            </div>
        </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</body>

</html>